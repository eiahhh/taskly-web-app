<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Taskly | Profile</title>
    <link rel="stylesheet" href="Style/profile.css">
</head>

<body>
<div class="container">
    <!-- SIDEBAR -->
    <aside class="sidebar">
        <div class="logo">taskly</div>

        <nav class="nav-menu">
            <a href="dashboard.html" class="nav-item">
                <span class="icon">„Ä∞Ô∏è</span>
                <span>Dashboard</span>
            </a>

            <a href="tasks.html" class="nav-item">
                <span class="icon">üìù</span>
                <span>Task</span>
            </a>

            <a href="aiAssistant.html" class="nav-item">
                <span class="icon">ü§ñ</span>
                <span>AI Assistant</span>
            </a>
        </nav>

        <div class="user-profile-sidebar">
            <div class="user-avatar-small" id="sidebarAvatar">BM</div>
            <div class="user-info-small">
                <div class="user-name-small" id="sidebarName">User Name</div>
            </div>
        </div>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="main-content">

        <header class="top-bar">
            <h1 class="page-title">My Profile</h1>
            <div class="header-actions">
                <button class="icon-btn" id="notificationBtn">üîî</button>
                <button class="icon-btn" id="settingsBtn">‚öôÔ∏è</button>
            </div>
        </header>

        <p class="page-subtitle">Manage your account settings and preferences</p>

        <!-- PROFILE HEADER -->
        <div class="profile-header">
            <div class="profile-left">
                <div class="profile-avatar" id="profileAvatar">UN</div>
                <div class="profile-info">
                    <h2 class="profile-name" id="profileName">
                        User Name
                    </h2>
                    <div class="profile-meta">
                        <span class="meta-item" id="profileEmail">üìß user@email.com</span>
                        <span class="meta-item" id="profileJoined">üìÖ Joined Recently</span>
                    </div>
                </div>
            </div>

            <div class="profile-actions">
                <button class="edit-profile-btn" id="editProfileBtn">Edit profile</button>

                <button class="save-profile-btn" id="saveBtn" style="display:none;">Save</button>
                <button class="cancel-profile-btn" id="cancelBtn" style="display:none;">Cancel</button>
            </div>
        </div>

        <!-- PROFILE CONTENT -->
        <div class="content-grid">

            <!-- PERSONAL INFORMATION -->
            <div class="card">
                <h3 class="card-title">Personal Information</h3>

                <div class="form-row">
                    <div class="form-group">
                        <label>Full Name</label>
                        <input type="text" id="fullName" placeholder="Enter your full name" readonly>
                    </div>
                    <div class="form-group">
                        <label>Nickname</label>
                        <input type="text" id="nickname" placeholder="Enter your nickname" readonly>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Email Address</label>
                        <input type="email" id="email" placeholder="Enter your email" readonly>
                    </div>
                    <div class="form-group">
                        <label>Mobile Number</label>
                        <input type="text" id="mobileNumber" placeholder="Enter your mobile number" readonly>
                    </div>
                </div>

                <div class="form-group">
                    <label>Bio</label>
                    <textarea id="bio" placeholder="Tell something about yourself" readonly></textarea>
                </div>
            </div>

            <!-- SECURITY -->
            <div class="card">
                <h3 class="card-title">Security</h3>

                <div class="security-item">
                    <div>
                        <div class="security-label">Password</div>
                        <div class="security-meta">Keep account secure</div>
                    </div>
                    <button id="changePasswordBtn" class="edit-profile-btn" style="padding:5px 10px;">Change password</button>
                </div>

                <div class="security-item">
                    <div>
                        <div class="security-label">Two-Factor Authentication</div>
                        <div class="security-meta">Add an extra layer of security</div>
                    </div>

                    <label class="toggle-switch">
                        <input type="checkbox">
                        <span class="toggle-slider round"></span>
                    </label>
                </div>
            </div>
                    
        </div>
    </main>
</div>

<!-- PASSWORD MODAL -->
<div id="passwordModal" class="modal">
    <div class="modal-content">
        <h2>Change Password</h2>

        <label>Current Password</label>
        <input type="password" id="newPass">

        <label>Confirm New Password</label>
        <input type="password" id="confirmPass">

        <div class="modal-actions">
            <button class="cancel-profile-btn" id="closeModal">Cancel</button>
            <button class="save-profile-btn" id="savePassword">Save</button>
        </div>
    </div>
</div>

<script>

    // BUTTONS
    const editBtn = document.getElementById("editProfileBtn");
    const saveBtn = document.getElementById("saveBtn");
    const cancelBtn = document.getElementById("cancelBtn");

    // INPUT FIELDS
    const fields = ["fullName", "nickname", "email", "mobileNumber", "bio"].map(id => document.getElementById(id)
    );

    let originalValues = {};

    // EDIT PROFILE
    editBtn.addEventListener("click", () => {
        originalValues = {};
        fields.forEach(f => {
            originalValues[f.id] = f.value;
            f.removeAttribute("readonly");
            f.style.backgroundColor = "#fff";
        });

        editBtn.style.display = "none";
        saveBtn.style.display = "inline-block";
        cancelBtn.style.display = "inline-block";
    });

    // SAVE CHANGES
    saveBtn.addEventListener("click", () => {

        // Disable fields again
        fields.forEach(f => {
            f.setAttribute("readonly", true);
            f.style.backgroundColor = "#fafafa";
        });

        // update values
        const newName = document.getElementById("fullName").value.trim();
        const newNickname = document.getElementById("nickname").value.trim();
        const newEmail = document.getElementById("email").value.trim();

        // Update profile header
        document.getElementById("profileName").textContent = newName || "User Name";
        document.getElementById("profileEmail").textContent = `üìß ${newEmail || "user@email.com"}`;

        // Update sidebar
        document.getElementById("sidebarName").textContent = newName || "User Name";

        // intials
        const initials = newName ? newName.split(" ").map(w => w[0].toUpperCase()).join("").slice(0, 2) : "UN";

        document.getElementById("sidebarAvatar").textContent = initials;
        document.getElementById("profileAvatar").textContent = initials;
        
        editBtn.style.display = "inline-block";
        saveBtn.style.display = "none";
        cancelBtn.style.display = "none";

        alert("Profile updated successfully!");
    });

    // CANCEL CHANGES
    cancelBtn.addEventListener("click", () => {
        fields.forEach(f => {
            f.value = originalValues[f.id];  // Restore old value
            f.setAttribute("readonly", true);
            f.style.backgroundColor = "#fafafa";
        });

        editBtn.style.display = "inline-block";
        saveBtn.style.display = "none";
        cancelBtn.style.display = "none";
    });

    // PASSWORD MODAL
    const modal = document.getElementById("passwordModal");
    const changeBtn = document.getElementById("changePasswordBtn");
    const closeModal = document.getElementById("closeModal");

    changeBtn.onclick = () => modal.style.display = "flex";
    closeModal.onclick = () => modal.style.display = "none";

    document.getElementById("savePassword").onclick = () => {
        alert("Password updated!");
        modal.style.display = "none";
    }

</script>
</body>
</html>
